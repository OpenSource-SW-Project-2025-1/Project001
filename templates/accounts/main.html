{% extends 'base.html' %}
{% load static %}
{% block content %}
<main class="main">
  <h1 class="main-title">BOKMANI</h1>

<!-- ê²€ìƒ‰ì°½ -->
<div class="search-container">
  <form action="/search_result/" method="get" class="search-form">
    <input type="text" id="search" name="query" class="search-input" placeholder="ë³µì§€ì œë„ ê²€ìƒ‰" value="{{ request.GET.query }}" required>
    <button type="submit" class="search-btn">ğŸ”</button>
  </form>
</div>


<div class="keyword-container">
  <div class="keyword-title"># í‚¤ì›Œë“œ ê²€ìƒ‰</div>
  <div class="keyword-line"></div>
    <form id="keywordForm" method="get" action="/accounts/run-api/">
        <input type="hidden" name="ThemaArray" id="ThemaInput">
        <button type="submit" id="submitBtn" style="display: none;">Submit</button>
    </form>
  <div class="keyword-buttons">
    <!-- ì˜ˆì‹œë¡œ í‚¤ì›Œë“œ 15ê°œ -->
      <div class="keyword-button" data-keyword="010">ì‹ ì²´ê±´ê°•</div>
      <div class="keyword-button" data-keyword="020">ì •ì‹ ê±´ê°•</div>
      <div class="keyword-button" data-keyword="030">ìƒí™œì§€ì›</div>
      <div class="keyword-button" data-keyword="040">ì£¼ê±°</div>
      <div class="keyword-button" data-keyword="050">ì¼ìë¦¬</div>
      <div class="keyword-button" data-keyword="060">ë¬¸í™”â–ªì—¬ê°€</div>
      <div class="keyword-button" data-keyword="070">ì•ˆì „â–ªìœ„ê¸°</div>
      <div class="keyword-button" data-keyword="080">ì„ì‹ â–ªì¶œì‚°</div>
      <div class="keyword-button" data-keyword="090">ë³´ìœ¡</div>
      <div class="keyword-button" data-keyword="100">êµìœ¡</div>
      <div class="keyword-button" data-keyword="110">ì…ì–‘â–ªìœ„íƒ</div>
      <div class="keyword-button" data-keyword="120">ë³´í˜¸â–ªëŒë´„</div>
      <div class="keyword-button" data-keyword="130">ì„œë¯¼ê¸ˆìœµ</div>
      <div class="keyword-button" data-keyword="140">ë²•ë¥ </div>
      <div class="keyword-button" data-keyword="160">ì—ë„ˆì§€</div>
  </div>
</div>
<script>
    document.querySelectorAll('.keyword-button').forEach(function(button) {
      button.addEventListener('click', function() {
        const intrsThemaArray = this.dataset.keyword;
        document.getElementById('ThemaInput').value = intrsThemaArray;
        document.getElementById('submitBtn').click();  // ìë™ ì œì¶œ
      });
    });
</script>



  <!-- Suggestion ë²„íŠ¼ -->
  <div class="suggestion-area">
      <a href="/recommend/" class="suggestion-button">âœ¨ Suggestion</a>
  </div>



  <!-- New Benefits -->
<section class="section section-new">
  <div class="section-header">
    <h2 class="section-title">New Benefits</h2>
    <a href="{% url 'search_result' %}" class="more-btn">more</a>
  </div>
  <div class="card-container">
    {% for benefit in new_benefits %}
    <div class="card">
      <div class="card-header">
        <span class="tag">ì—¬ì„±ê°€ì¡±ë¶€</span>
        <span class="d-day">D - {{ benefit.d_day }}</span>
      </div>
      <div class="title">{{ benefit.title }}</div>
      <div class="desc">ì •ì±… ë‚´ìš© : {{ benefit.description }}</div>
      <div class="apply">ì‹ ì²­ ê¸°ê°„ : {{ benefit.period }}</div>
      <a href="{% url 'welfare_info' %}" class="detail-btn">+ ìì„¸íˆë³´ê¸°</a>
      <div class="keywords">#ì‹ ì²´ê±´ê°• #ì„ì‹ .ì¶œì‚° #ì €ì†Œë“</div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- Popularity Benefits -->
<section class="section section-popular">
  <div class="section-header">
    <h2 class="section-title">Popularity Benefits</h2>
    <a href="{% url 'search_result' %}" class="more-btn">more</a>
  </div>
  <div class="card-container">
    {% for benefit in popular_benefits %}
    <div class="card">
      <div class="card-header">
        <span class="tag">ì—¬ì„±ê°€ì¡±ë¶€</span>
        <span class="d-day">D - {{ benefit.d_day }}</span>
      </div>
      <div class="title">{{ benefit.title }}</div>
      <div class="desc">ì •ì±… ë‚´ìš© : {{ benefit.description }}</div>
      <div class="apply">ì‹ ì²­ ê¸°ê°„ : {{ benefit.period }}</div>
      <a href="{% url 'welfare_info' %}" class="detail-btn">+ ìì„¸íˆë³´ê¸°</a>
      <div class="keywords">#í‚¤ì›Œë“œ #í‚¤ì›Œë“œ #í‚¤ì›Œë“œ</div>
    </div>
    {% endfor %}
  </div>
</section>

</main>
{% endblock %}
