{% extends 'base.html' %}
{% load static %}
{% load custom_filters %} {# ìƒˆë¡œ ì¶”ê°€ëœ ë¶€ë¶„! #}

{% block content %}
    <main class="main">
        <h1 class="main-title">BOKMANI</h1>

        <div class="search-container">
            <form action="/search_result/" method="get" class="search-form">
                <input type="text" id="search" name="query" class="search-input" placeholder="ë³µì§€ì œë„ ê²€ìƒ‰"
                       value="{{ request.GET.query }}" required>
                <button type="submit" class="search-btn">ğŸ”</button>
            </form>
        </div>


        <div class="keyword-container">
            <form id="keywordForm" method="get" action="/search_result/">
                <input type="hidden" name="query" id="ThemaInput">
                <button type="submit" id="submitBtn" style="display: none;">Submit</button>
            </form>
            <div class="keyword-buttons">
                <div class="keyword-button" data-keyword="ì‹ ì²´ê±´ê°•">ì‹ ì²´ê±´ê°•</div>
                <div class="keyword-button" data-keyword="ì •ì‹ ê±´ê°•">ì •ì‹ ê±´ê°•</div>
                <div class="keyword-button" data-keyword="ìƒí™œì§€ì›">ìƒí™œì§€ì›</div>
                <div class="keyword-button" data-keyword="ì£¼ê±°">ì£¼ê±°</div>
                <div class="keyword-button" data-keyword="ì¼ìë¦¬">ì¼ìë¦¬</div>
                <div class="keyword-button" data-keyword="ë¬¸í™”ì—¬ê°€">ë¬¸í™”â–ªì—¬ê°€</div>
                <div class="keyword-button" data-keyword="ì•ˆì „ìœ„ê¸°">ì•ˆì „â–ªìœ„ê¸°</div>
                <div class="keyword-button" data-keyword="ì„ì‹ ì¶œì‚°">ì„ì‹ â–ªì¶œì‚°</div>
                <div class="keyword-button" data-keyword="ë³´ìœ¡">ë³´ìœ¡</div>
                <div class="keyword-button" data-keyword="êµìœ¡">êµìœ¡</div>
                <div class="keyword-button" data-keyword="ì…ì–‘ìœ„íƒ">ì…ì–‘â–ªìœ„íƒ</div>
                <div class="keyword-button" data-keyword="ë³´í˜¸ëŒë´„">ë³´í˜¸â–ªëŒë´„</div>
                <div class="keyword-button" data-keyword="ì„œë¯¼ê¸ˆìœµ">ì„œë¯¼ê¸ˆìœµ</div>
                <div class="keyword-button" data-keyword="ë²•ë¥ ">ë²•ë¥ </div>
                <div class="keyword-button" data-keyword="ì—ë„ˆì§€">ì—ë„ˆì§€</div>
            </div>
        </div>
        <script>
            document.querySelectorAll('.keyword-button').forEach(function (button) {
                button.addEventListener('click', function () {
                    const keyword = this.dataset.keyword;
                    document.getElementById('ThemaInput').value = keyword;
                    document.getElementById('submitBtn').click();
                });
            });
        </script>

        <div class="suggestion-area">
            <a href="/recommend/" class="suggestion-button">âœ¨ Suggestion</a>
        </div>

        <section class="section section-new">
            <div class="section-header">
                <h2 class="section-title">New Benefits</h2>
                <a href="{% url 'search_result' %}" class="more-btn">more</a>
            </div>
            <div class="card-container">
                {% for benefit in new_benefits %}
                    <div class="card">
                        <div class="card-header">
                            <span class="tag">{{ benefit.tag|default:"ì •ë³´ ì—†ìŒ" }}</span>
                            {# {% if benefit.d_day %} #}
                            {# <span class="d-day">D - {{ benefit.d_day }}</span> #}
                            {# {% endif %} #}
                        </div>
                        <div class="title">{{ benefit.policy_name|default:"ì œëª© ì—†ìŒ" }}</div>
                        <div class="desc">ì •ì±… ë‚´ìš© : {{ benefit.summary|default:"ë‚´ìš© ì—†ìŒ" }}</div>
                        <div class="apply">ì‹ ì²­ ê¸°ê°„ : {{ benefit.period|default:"ì •ë³´ ì—†ìŒ" }}</div>
                        <a href="{% url 'welfare_info' benefit.id %}" class="detail-btn">+ ìì„¸íˆë³´ê¸°</a>
                        <div class="keywords">
                            {# keywords í•„ë“œë¥¼ ì‰¼í‘œë¡œ ë¶„ë¦¬í•˜ì—¬ í•´ì‹œíƒœê·¸ë¡œ í‘œì‹œ #}
                            {% if benefit.keywords %}
                                {% for keyword in benefit.keywords|split_string:',' %} {# ì—¬ê¸°ë¥¼ ìˆ˜ì •í–ˆì–´ìš”! #}
                                    #{{ keyword|strip_string }} {# ì—¬ê¸°ë¥¼ ìˆ˜ì •í–ˆì–´ìš”! #}
                                {% endfor %}
                            {% else %}
                                #í‚¤ì›Œë“œì •ë³´ì—†ìŒ
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>

        <section class="section section-popular">
            <div class="section-header">
                <h2 class="section-title">Popularity Benefits</h2>
                <a href="{% url 'search_result' %}" class="more-btn">more</a>
            </div>
            <div class="card-container">
                {% for benefit in popular_benefits %}
                    <div class="card">
                        <div class="card-header">
                            <span class="tag">{{ benefit.tag|default:"ì •ë³´ ì—†ìŒ" }}</span>
                            {# {% if benefit.d_day %} #}
                            {# <span class="d-day">D - {{ benefit.d_day }}</span> #}
                            {# {% endif %} #}
                        </div>
                        <div class="title">{{ benefit.policy_name|default:"ì œëª© ì—†ìŒ" }}</div>
                        <div class="desc">ì •ì±… ë‚´ìš© : {{ benefit.summary|default:"ë‚´ìš© ì—†ìŒ" }}</div>
                        <div class="apply">ì‹ ì²­ ê¸°ê°„ : {{ benefit.period|default:"ì •ë³´ ì—†ìŒ" }}</div>
                        <a href="{% url 'welfare_info' benefit.id %}" class="detail-btn">+ ìì„¸íˆë³´ê¸°</a>
                        <div class="keywords">
                            {% if benefit.keywords %}
                                {% for keyword in benefit.keywords|split_string:',' %} {# ì—¬ê¸°ë¥¼ ìˆ˜ì •í–ˆì–´ìš”! #}
                                    #{{ keyword|strip_string }} {# ì—¬ê¸°ë¥¼ ìˆ˜ì •í–ˆì–´ìš”! #}
                                {% endfor %}
                            {% else %}
                                #í‚¤ì›Œë“œì •ë³´ì—†ìŒ
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>

    </main>
{% endblock %}