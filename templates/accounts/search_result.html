{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include 'accounts/menu.html' %}

<main class="main">

  <!-- ê²€ìƒ‰ì°½ -->
<div class="search-container">
  <form action="/search_result/" method="get" class="search-form">
    <input type="text" name="query" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="{{ query|default:'' }}" class="search-input" required>
    <button type="submit" class="search-btn">ğŸ”</button>
  </form>
</div>
<!--css ìˆ˜ì • -->
      <style>
    body {
      background-color: #a5dff6; /* ì—°í•œ í•˜ëŠ˜ìƒ‰ ë°°ê²½ */
      font-family: sans-serif;
    }

    .keyword-container {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 90%;      
      width: 600px;
      margin: 50px auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
    }

    .keyword-title {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .keyword-line {
      border-bottom: 1px solid black;
      margin-bottom: 15px;
    }

    .keyword-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      overflow-x: hidden;
    }

    .keyword-button {
      border: 1px solid black;
      padding: 5px 15px;
      background-color: white;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .keyword-button:hover {
      background-color: #e0f0ff;
    }
  </style>
</head>
<body>

<div class="keyword-container">
  <div class="keyword-title"># í‚¤ì›Œë“œ ê²€ìƒ‰</div>
  <div class="keyword-line"></div>
  <div class="keyword-buttons">
    <!-- ì˜ˆì‹œë¡œ í‚¤ì›Œë“œ 15ê°œ -->
    <div class="keyword-button" data-keyword="ì‹ ì²´ê±´ê°•">ì‹ ì²´ê±´ê°•</div>
    <div class="keyword-button" data-keyword="ì •ì‹ ê±´ê°•">ì •ì‹ ê±´ê°•</div>
    <div class="keyword-button" data-keyword="ìƒí™œì§€ì›">ìƒí™œì§€ì›</div>
    <div class="keyword-button" data-keyword="ì£¼ê±°">ì£¼ê±°</div>
    <div class="keyword-button" data-keyword="ì¼ìë¦¬">ì¼ìë¦¬</div>
    <div class="keyword-button" data-keyword="ë¬¸í™”â–ªì—¬ê°€">ë¬¸í™”â–ªì—¬ê°€</div>
    <div class="keyword-button" data-keyword="ì•ˆì „â–ªìœ„ê¸°">ì•ˆì „â–ªìœ„ê¸°</div>
    <div class="keyword-button" data-keyword="ì„ì‹ â–ªì¶œì‚°">ì„ì‹ â–ªì¶œì‚°</div>
    <div class="keyword-button" data-keyword="ë³´ìœ¡">ë³´ìœ¡</div>
    <div class="keyword-button" data-keyword="êµìœ¡">êµìœ¡</div>
    <div class="keyword-button" data-keyword="ì…ì–‘â–ªìœ„íƒ">ì…ì–‘â–ªìœ„íƒ</div>
    <div class="keyword-button" data-keyword="ë³´í˜¸â–ªëŒë´„">ë³´í˜¸â–ªëŒë´„</div>
    <div class="keyword-button" data-keyword="ì„œë¯¼ê¸ˆìœµ">ì„œë¯¼ê¸ˆìœµ</div>
    <div class="keyword-button" data-keyword="ë²•ë¥ ">ë²•ë¥ </div>
    <div class="keyword-button" data-keyword="ì—ë„ˆì§€">ì—ë„ˆì§€</div>
  </div>
</div>

</body>

  <!-- í‚¤ì›Œë“œ ì •ë ¬ ì„ íƒ -->
  <section class="section-new">
    <div class="section-header">
      <h3 class="section-title">ê²€ìƒ‰ ê²°ê³¼</h3>
      <div class="dropdown">
        <button class="more-btn">ì •ë ¬ â–¾</button>
        <!-- ì •ë ¬ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ ì¶”ê°€ ì˜ˆì • -->
      </div>
    </div>

    <!-- ì¹´ë“œ ëª©ë¡ -->
    <div class="card-container">
      {% for item in results %}
      <div class="card">
        <div class="card-header">
          <span class="tag">{{ item.category|default:"ë¶„ë¥˜ ì—†ìŒ" }}</span>
          {% if item.d_day %}
            <span class="d-day">D - {{ item.d_day }}</span>
          {% endif %}
        </div>
        <div class="title">{{ item.title }}</div>
        <div class="desc">{{ item.description }}</div>

        <!-- detail ë§í¬ ì„ì‹œ ì²˜ë¦¬ -->
        <a href="{% url 'welfare_info' %}" class="detail-btn">+ ìì„¸íˆë³´ê¸°</a>

        <div class="keywords">
          {% if item.keywords %}
            {% for keyword in item.keywords %}
              <span>#{{ keyword }}</span>
            {% endfor %}
          {% else %}
            <span style="color:#888;">#ì¶”ì²œ ì—†ìŒ</span>
          {% endif %}
        </div>
      </div>
      {% empty %}
      <p style="text-align:center; color:#555;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>

  <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
  {% if page_range %}
  <div class="pagination" style="margin-top: 40px; text-align: center;">
    <span class="page-link">ì²˜ìŒ</span>
    {% for i in page_range %}
      <span class="page-link {% if i == current_page %}active{% endif %}">{{ i }}</span>
    {% endfor %}
    <span class="page-link">ë§ˆì§€ë§‰</span>
  </div>
  {% endif %}
</main>
    
{#<script>#}
{#// api í‚¤ì›Œë“œë¡œ ë¶ˆëŸ¬ì˜¤ê¸°#}
{#document.querySelectorAll('.keyword-button').forEach(button => {#}
{#  button.addEventListener('click', () => {#}
{#    const keyword = button.getAttribute('data-keyword');#}
{##}
{#    fetch(`/search-api/?keyword=${encodeURIComponent(keyword)}`)#}
{#      .then(res => res.json())#}
{#      .then(data => {#}
{#        document.getElementById('result').innerHTML = `#}
{#          <h3>ê²€ìƒ‰ ê²°ê³¼</h3>#}
{#          <pre>${JSON.stringify(data, null, 2)}</pre>#}
{#        `;#}
{#      })#}
{#      .catch(err => console.error('API ìš”ì²­ ì‹¤íŒ¨:', err));#}
{#  });#}
{# });#}
{#</script>#}

{% endblock %}
